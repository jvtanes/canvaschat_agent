<div class="container-fluid">
     
         <div class="row">
        <div class="col-sm-12">
        <div class="col-sm-12 mt-5">
           <div class="row"> 
                <div class="col-sm-3">
                 <a href = "#partners" style="text-decoration:none;">
                     <div class="card" >
                        <div class="card-body">
                            <div class="row">
                            <div class="col-sm-4">
                              <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                 viewBox="0 0 800 800" style="enable-background:new 0 0 800 800;" xml:space="preserve">
                            <style type="text/css">
                                .st0{fill:#A83AEF;}
                                .st1{fill:#FFFFFF;}
                            </style>
                            <g>
                                <g>
                                    <g>
                                        <path class="st0" d="M400,784.1C187.2,784.1,14.1,611,14.1,398.2C14.1,185.4,187.2,12.3,400,12.3
                                            c212.8,0,385.9,173.1,385.9,385.9C785.9,611,612.8,784.1,400,784.1L400,784.1z M400,29.5c-203.3,0-368.7,165.4-368.7,368.7
                                            S196.7,767,400,767c203.3,0,368.7-165.4,368.7-368.7S603.3,29.5,400,29.5L400,29.5z"/>
                                    </g>
                                </g>
                                <g>
                                    <g>
                                        <path class="st0" d="M576.1,562.2H224c-4.7,0-8.6-3.8-8.6-8.6V273.5c0-4.7,3.8-8.6,8.6-8.6h91.8c4.7,0,8.6,3.8,8.6,8.6
                                            c0,4.7-3.8,8.6-8.6,8.6h-83.3v263h334.9v-263h-77.3c-4.7,0-8.6-3.8-8.6-8.6c0-4.7,3.8-8.6,8.6-8.6h85.9c4.7,0,8.6,3.8,8.6,8.6
                                            v280.1C584.6,558.4,580.8,562.2,576.1,562.2L576.1,562.2z"/>
                                    </g>
                                    <g>
                                        <path class="st0" d="M330.5,414.6c-20.1,0-36.5-18.2-36.5-40.7c0-22.4,16.4-40.7,36.5-40.7c20.1,0,36.4,18.3,36.4,40.7
                                            C366.9,396.4,350.5,414.6,330.5,414.6L330.5,414.6z M330.5,350.4c-10.7,0-19.3,10.6-19.3,23.5c0,13,8.7,23.5,19.3,23.5
                                            c10.6,0,19.2-10.6,19.2-23.5C349.7,361,341.1,350.4,330.5,350.4L330.5,350.4z"/>
                                    </g>
                                    <g>
                                        <path class="st0" d="M384.1,509.7H276.9c-4.5,0-8.2-3.5-8.5-8l-2.4-34.6c-0.9-13.5,9.1-28.4,22.4-33.3c27.3-9.8,57.2-9.7,84.2,0
                                            c13.4,4.9,23.5,19.9,22.4,33.4c-0.7,11.3-1.5,23-2.3,34.6C392.3,506.2,388.6,509.7,384.1,509.7L384.1,509.7z M284.9,492.5h91.2
                                            c0.6-8.9,1.2-17.8,1.8-26.6c0.4-5.3-4.7-13.7-11.2-16.1c-23.2-8.3-49.2-8.3-72.5,0c-6.6,2.4-11.5,10.8-11.1,16.1L284.9,492.5
                                            L284.9,492.5z"/>
                                    </g>
                                    <path class="st0" d="M468.2,259.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9H339.5c-7.1,0-12.8-5.8-12.8-12.9
                                        s5.8-12.9,12.8-12.9H468.2 M468.2,242.8H339.5c-16.5,0-30,13.4-30,30s13.4,30,30,30h128.6c16.6,0,30-13.4,30-30
                                        S484.8,242.8,468.2,242.8L468.2,242.8z"/>
                                    <g>
                                        <path class="st0" d="M508.2,390h-71.5c-4.7,0-8.6-3.8-8.6-8.6c0-4.7,3.8-8.6,8.6-8.6h71.5c4.7,0,8.6,3.8,8.6,8.6
                                            C516.8,386.2,513,390,508.2,390L508.2,390z"/>
                                    </g>
                                    <g>
                                        <path class="st0" d="M508.2,444.3h-71.5c-4.7,0-8.6-3.8-8.6-8.6c0-4.7,3.8-8.6,8.6-8.6h71.5c4.7,0,8.6,3.8,8.6,8.6
                                            C516.8,440.5,513,444.3,508.2,444.3L508.2,444.3z"/>
                                    </g>
                                </g>
                            </g>
                            </svg>
                            </div>
                            <div class="col-sm-8">
                                <center><h6><b>Leads</b></h6>
                                <h3><b>{{countleads}}</b></h3></center>
                            </div>
                            </div>
                        </div>
                    </div>
                 </a>
                </div>
               <div class="col-sm-3">
                  <a href = "#admintask" style="text-decoration:none;">
                       <div class="card">
                       <div class="card-body" ng-init="displaytask()">
                            <div class="row">
                            <div class="col-sm-4">
                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                     viewBox="0 0 800 800" style="enable-background:new 0 0 800 800;" xml:space="preserve">
                                <style type="text/css">
                                    .st0{fill:#A83AEF;}
                                    .st1{fill:#35424B;}
                                    .st2{fill:#FFFFFF;}
                                </style>
                                <g>
                                    <g>
                                        <g>
                                            <path class="st0" d="M397.7,784.1C185,784.1,11.9,611,11.9,398.2C11.9,185.4,185,12.3,397.7,12.3s385.9,173.1,385.9,385.9
                                                C783.6,611,610.5,784.1,397.7,784.1L397.7,784.1z M397.7,29.5C194.4,29.5,29,194.9,29,398.2S194.4,767,397.7,767
                                                s368.7-165.4,368.7-368.7S601.1,29.5,397.7,29.5L397.7,29.5z"/>
                                        </g>
                                    </g>
                                    <g>
                                        <g>
                                            <path class="st0" d="M251.6,593.2c-1.3,0-2.6-0.3-3.7-0.9c-3-1.4-4.8-4.4-4.8-7.7v-55.7h-24.6c-14.2,0-25.7-11.5-25.7-25.7V353.3
                                                c0-14.2,11.5-25.7,25.7-25.7h223c14.2,0,25.7,11.5,25.7,25.7v149.9c0,14.2-11.5,25.7-25.7,25.7H336l-79.1,62.5
                                                C255.4,592.6,253.5,593.2,251.6,593.2L251.6,593.2z M218.4,344.7c-4.7,0-8.6,3.8-8.6,8.6v149.9c0,4.7,3.8,8.6,8.6,8.6h33.2
                                                c4.7,0,8.6,3.8,8.6,8.6v46.6l67.5-53.3c1.5-1.2,3.4-1.9,5.3-1.9h108.3c4.7,0,8.6-3.8,8.6-8.6V353.3c0-4.7-3.8-8.6-8.6-8.6H218.4
                                                L218.4,344.7z"/>
                                        </g>
                                        <g>
                                            <path class="st0" d="M543.9,468.9c-1.9,0-3.8-0.6-5.3-1.9l-81.4-64.3c-3.7-2.9-4.3-8.3-1.4-12c2.9-3.7,8.3-4.3,12-1.4l67.5,53.3
                                                V396c0-4.7,3.8-8.6,8.6-8.6h33.2c4.7,0,8.6-3.8,8.6-8.6V229c0-4.7-3.8-8.6-8.6-8.6h-223c-4.7,0-8.6,3.8-8.6,8.6v102.9
                                                c0,4.7-3.8,8.6-8.6,8.6c-4.7,0-8.6-3.8-8.6-8.6V229c0-14.2,11.5-25.7,25.7-25.7h223c14.2,0,25.7,11.5,25.7,25.7v149.9
                                                c0,14.2-11.5,25.7-25.7,25.7h-24.6v55.7c0,3.3-1.9,6.3-4.8,7.7C546.4,468.6,545.2,468.9,543.9,468.9L543.9,468.9z"/>
                                        </g>
                                    </g>
                                </g>
                                </svg>
                            </div>
                            <div class="col-sm-8">
                                <center><h6><b>Today's Chats</b></h6>
                                <h3><b>{{todaysChats}}</b></h3></center>
                            </div>
                            </div>
                        </div>
                    </div>
                  </a>
                </div>
                <div class="col-sm-3">
                     <a href = "#" style="text-decoration:none;">
                 <div class="card">
                        <div class="card-body" ng-init="displaytask()">
                            <div class="row">
                            <div class="col-sm-4">
                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                             viewBox="0 0 800 800" style="enable-background:new 0 0 800 800;" xml:space="preserve">
                        <style type="text/css">
                            .st0{fill:#A83AEF;}
                            .st1{fill:#35424B;}
                            .st2{fill:#FFFFFF;}
                        </style>
                        <g>
                            <g>
                                <g>
                                    <path class="st0" d="M400,783.4c-212.8,0-385.9-173.1-385.9-385.9C14.1,184.7,187.2,11.6,400,11.6
                                        c212.8,0,385.9,173.1,385.9,385.9C785.9,610.2,612.8,783.4,400,783.4L400,783.4z M400,28.7c-203.3,0-368.7,165.4-368.7,368.7
                                        c0,203.3,165.4,368.7,368.7,368.7c203.3,0,368.7-165.4,368.7-368.7C768.7,194.1,603.3,28.7,400,28.7L400,28.7z"/>
                                </g>
                            </g>
                            <g>
                                <g>
                                    <path class="st0" d="M596,393.9c-4.7,0-8.6-3.8-8.6-8.6c0-98.2-79.9-178.2-178.2-178.2c-4.7,0-8.6-3.8-8.6-8.6
                                        c0-4.7,3.8-8.6,8.6-8.6c107.7,0,195.4,87.6,195.4,195.3C604.6,390,600.8,393.9,596,393.9L596,393.9z"/>
                                </g>
                                <g>
                                    <path class="st0" d="M541.2,393.9c-4.7,0-8.6-3.8-8.6-8.6c0-68-55.3-123.3-123.3-123.3c-4.7,0-8.6-3.8-8.6-8.6s3.8-8.6,8.6-8.6
                                        c77.5,0,140.5,63,140.5,140.5C549.7,390,545.9,393.9,541.2,393.9L541.2,393.9z"/>
                                </g>
                                <g>
                                    <path class="st0" d="M270.3,595.1c-20,0-38.8-7.8-53-22c-14.2-14.1-22-32.9-22-53s7.8-38.8,22-53l40.9-40.8
                                        c3.3-3.3,8.8-3.3,12.1,0c3.3,3.3,3.3,8.8,0,12.1l-40.9,40.8c-10.9,10.9-16.9,25.4-16.9,40.8c0,15.4,6,29.9,16.9,40.8
                                        c21.8,21.8,59.9,21.8,81.7,0l40.8-40.8c3.3-3.3,8.8-3.3,12.1,0c3.3,3.3,3.3,8.8,0,12.1l-40.8,40.8
                                        C309.2,587.3,290.3,595.1,270.3,595.1L270.3,595.1z"/>
                                </g>
                                <g>
                                    <path class="st0" d="M370.8,541.4c-2.8,0-5.5-1.4-7.2-3.9c-29.1-44.3-66.4-81.6-110.7-110.7c-3.6-2.4-4.9-7-3-10.9l75-156.1
                                        c1.1-2.2,3-3.9,5.4-4.5c2.4-0.7,4.9-0.3,7,1.1c78.7,51.7,144.9,117.9,196.7,196.7c1.4,2.1,1.8,4.6,1.1,7
                                        c-0.7,2.4-2.3,4.4-4.5,5.4l-156.1,75C373.3,541.2,372,541.4,370.8,541.4L370.8,541.4z M268.6,416.8
                                        c41.5,28.3,76.8,63.6,105.2,105.1l140.5-67.5C466.5,383.9,406.6,324,336.1,276.3L268.6,416.8L268.6,416.8z"/>
                                </g>
                                <g>
                                    <path class="st0" d="M364.4,605c-16.5,0-33.8-7.8-47.4-21.5c-3.3-3.3-3.3-8.8,0-12.1c3.3-3.3,8.8-3.3,12.1,0
                                        c10.3,10.3,23.5,16.5,35.3,16.5c0,0,0,0,0,0c4.9,0,11.8-1.1,17-6.4c3.3-3.4,8.8-3.3,12.1,0c3.4,3.3,3.4,8.8,0,12.1
                                        C386.2,601,376.1,604.9,364.4,605C364.4,605,364.4,605,364.4,605L364.4,605z"/>
                                </g>
                            </g>
                        </g>
                        </svg>
                            </div>
                            <div class="col-sm-8">
                                <center><h6><b>Properties</b></h6>
                                <h3><b>{{properties}}</b></h3></center>
                            </div>
                            </div>
                        </div>
                    </div>
                    </a>
                </div>
                <div class="col-sm-3">
                     <a href = "#" style="text-decoration:none;">
                 <div class="card">
                        <div class="card-body" ng-init="displaytask()">
                            <div class="row">
                            <div class="col-sm-4">
                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                 viewBox="0 0 800 800" style="enable-background:new 0 0 800 800;" xml:space="preserve">
                            <style type="text/css">
                                .st0{fill:#A83AEF;}
                                .st1{fill:#35424B;}
                                .st2{fill:#FFFFFF;}
                            </style>
                            <g>
                                <g>
                                    <g>
                                        <path class="st0" d="M400,784.1C187.2,784.1,14.1,611,14.1,398.2C14.1,185.4,187.2,12.3,400,12.3
                                            c212.8,0,385.9,173.1,385.9,385.9C785.9,611,612.8,784.1,400,784.1L400,784.1z M400,29.5c-203.3,0-368.7,165.4-368.7,368.7
                                            S196.7,767,400,767c203.3,0,368.7-165.4,368.7-368.7S603.3,29.5,400,29.5L400,29.5z"/>
                                    </g>
                                </g>
                                <g>
                                    <path class="st0" d="M335.6,426.6v37.7h225.5v68H335.6v37.6l-96.7-71.6L335.6,426.6 M335.6,409.5c-3.6,0-7.2,1.1-10.2,3.4
                                        l-96.7,71.7c-4.4,3.2-6.9,8.3-6.9,13.8c0,5.4,2.6,10.5,6.9,13.8l96.7,71.6c3,2.2,6.6,3.4,10.2,3.4c2.6,0,5.3-0.6,7.7-1.8
                                        c5.8-2.9,9.4-8.8,9.4-15.3v-20.5h208.4c9.5,0,17.2-7.7,17.2-17.2v-68c0-9.5-7.7-17.2-17.2-17.2H352.7v-20.5
                                        c0-6.5-3.7-12.4-9.4-15.3C340.9,410.1,338.2,409.5,335.6,409.5L335.6,409.5z"/>
                                    <path class="st0" d="M464.4,226.5l96.7,71.6l-96.7,71.7v-37.7H238.9v-68h225.5V226.5 M464.4,209.4c-2.6,0-5.3,0.6-7.7,1.8
                                        c-5.8,2.9-9.4,8.8-9.4,15.3V247H238.9c-9.5,0-17.2,7.7-17.2,17.2v68c0,9.5,7.7,17.2,17.2,17.2h208.4v20.5c0,6.5,3.7,12.4,9.4,15.3
                                        c2.4,1.2,5.1,1.8,7.7,1.8c3.6,0,7.2-1.1,10.2-3.4l96.7-71.7c4.4-3.2,6.9-8.3,6.9-13.8c0-5.4-2.6-10.5-6.9-13.8l-96.7-71.6
                                        C471.6,210.5,468,209.4,464.4,209.4L464.4,209.4z"/>
                                </g>
                            </g>
                            </svg>
                                                        
                        </div>
                            <div class="col-sm-8">
                                <center><h6><b>Missed Chats</b></h6>
                                <h3><b>{{missedChats}}</b></h3></center>
                            </div>
                            </div>
                        </div>
                    </div>
                    </a>
                </div>
               
            </div>       
            </div> 

            <div class="col-sm-12 mt-4">
                <div class="row">
                    <div class="col-lg-6 mt-4">
                        <div class="card shadow mb-4">
                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between" >
                                <h6 class="m-0 font-weight-bold text-default">Monitoring Chart - Weekly</h6>
                                <div class="dropdown no-arrow">
                                    <select style="border: 1px solid rgba(0,0,0,.2); outline: none; font-size: 12px; font-family: arial; padding: 5px; color: rgba(0,0,0,.7);" ng-init="getWebsiteList()" ng-model="myWebsite.value" ng-change="dashboardGraph()">
                                        <option ng-repeat="i in mywebsiteLists">{{ i.website }}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="card-body " ng-init="dashboardGraph()" style=" overflow:auto;">
                               
                                    <div zingchart id="chart-1" zc-json="myJson" zc-height="460"></div>
                            
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 mt-4">
                        <div class="card shadow mb-4">
                            <div class="card-header py-2  d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-default">Chat History</h6>
                                 
                                <div class="dropdown no-arrow pt-2 pb-1">
                                   <label>Select property: </label>
                                    <select ng-init="getWebsiteList()" style="border: 1px solid rgba(0,0,0,.2); outline: none; font-size: 12px; font-family: arial; padding: 5px; color: rgba(0,0,0,.7);" ng-model="myWebsite.value" ng-change="display_ChatHistory()">
                                        <option ng-repeat="i in mywebsiteLists">{{ i.website }}</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="card-body"  style="height:519px; overflow:auto;">
                                
                                   <div class="card">
                                        <table class="table table-stripped" ng-init="displayChatHistory()">
                                        <thead>
                                		<tr>
                                			<th class="w-30">Chat ID</th>
                                			<th class="w-25">Client/Visitor</th>
                                			<th class="w-25">Attended By</th>
                                			<th class="w-20">Action</th>
                                		</tr>
                                	</thead>
                                		<tbody>
                                			<tr ng-repeat = "h in chatHistoryArray">
                                				<td>{{h.chatid}}</td>
                                				<td>{{h.firstname}}</td>
                                				<td ng-if="h.role !== null && h.agentfirstname !== null && h.agentlastname !== null">{{ h.agentfirstname + " " + "(" + h.role + ")" }}</td>
                                                <td ng-if="h.role === null && h.agentfirstname === null && h.agentlastname === null">Not attended</td>
                                					
                                				<td>
                                			    
                                              	<button class="btn btn-primary btn-xs"  ng-click="reviewThread(h.chathistory, h.chatid, h.firstname)"><i class="fa fa-eye fa-fw"></i> View</button>
                                				</td>
                                			</tr>
                		            </tbody>
                                    </table>
                                   </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>



        </div>
        </div> 
           
</div>
<input type="hidden" id="widgetHeader">
<input type="hidden" id="widgetIntro">

   <div class="modal fade" id="viewThread">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <label><strong>Chat ID: {{ reviewHeader }}</strong></label>
                <button class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <ul class="w-100">
    			    <li ng-repeat="i in reviewConvo" style="border:none;">
    			        <div ng-if="i.sender_uuid != 0">
    			            <div ng-if="i.agentname == 'undefined'" style="width: 100%; float: left; font-size:13px; display: block; margin-bottom: 10px">
        			            <p style="max-width: 80%; padding: 15px; background: #fff; border:1px solid rgba(0,0,0,.2); color: #000; float: left; border-radius: 8px;">
        			                <b>{{i.visitorname}}:&nbsp;</b>
        			                {{i.content}}
        			            </p>
        			        </div>
        			        
        			        <div ng-if="i.agentname != 'undefined'" style="width: 100%; float: right; font-size:13px; display: block; margin-bottom: 10px">
        			            <p style="max-width: 80%; padding: 15px; background: #F2FFED; border:1px solid rgba(0,0,0,.2); color: #000; float: right; border-radius: 8px;">
        			                <b>{{i.agentname}}:&nbsp;</b>
        			                {{i.content}}
        			            </p>
        			        </div>
    			        </div>
    			        
    			        <div ng-if="i.sender_uuid == 0">
        			        <div style="width: 100%; float: right; font-size:13px; display: block; margin-bottom: 10px">
        			            <p style="max-width: 80%; padding: 15px; background: #F2FFED; border:1px solid rgba(0,0,0,.2); color: #000; float: right; border-radius: 8px;">
        			                <b>CanvasChat:&nbsp;</b>
        			                {{i.content}}
        			            </p>
        			        </div>
    			        </div>
    			    </li>
    			</ul>
            </div>
            <div class="modal-footer">
             
            </div>
        </div>
    </div>
</div>

<input type="hidden" id="joinChatBtn">
<input type="hidden" id="chatInputMessage">
   